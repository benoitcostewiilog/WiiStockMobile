<ion-header>
    <ion-navbar>
        <ion-buttons start>
            <button ion-button icon-only (click)="searchEmplacementModal()">
                <ion-icon name="search"></ion-icon>
            </button>
        </ion-buttons>
        <ion-title>Finaliser une préparation</ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <ion-row class="row-menu-stats">
        <ion-col class="col-menu-stats" *ngIf="emplacement">
            <p class="smaller">Emplacement sélectionné :</p>
            <p class="smaller">{{emplacement.label}}</p>
        </ion-col>

        <ion-col *ngIf="!emplacement" class="col-menu-stats">
            <p><span class="big">SCANNER</span><br>EMPLACEMENT</p>
            <ion-icon name="barcode" (click)="scan()"></ion-icon>
        </ion-col>
    </ion-row>

    <ion-row>
        <ion-card>
            <ion-card-content>
                <ion-item>
                    <ion-label *ngIf="!emplacement">sélectionnez un emplacement</ion-label>
                    <ionic-selectable
                        #locationComponent
                        item-content
                        [(ngModel)]="emplacement"
                        [items]="db_locations_for_list"
                        itemValueField="id"
                        itemTextField="label"
                        [canSearch]="true"
                        [hasInfiniteScroll]="true"
                        (onSearch)="searchLocation($event)"
                        (onChange)="onLocationChange($event)"
                        (onInfiniteScroll)="getMoreLocations($event)">
                        <ng-template ionicSelectableSearchFailTemplate>
                        </ng-template>
                    </ionic-selectable>
                </ion-item>
            </ion-card-content>
        </ion-card>
    </ion-row>
</ion-content>

<ion-footer padding>
    <div class="d-flex">
        <ion-icon class="big-icon" name="arrow-dropleft-circle" navPop></ion-icon>
        <ion-icon class="big-icon" name="checkmark-circle" (click)="validate()" *ngIf="emplacement"></ion-icon>
    </div>
</ion-footer>
